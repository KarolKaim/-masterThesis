\chapter{Wstęp}
\label{cha:Wstęp}

\section{Wprowadzenie}
\label{sec:Wprowadzenie}
Nowoczesnie technologie znajdują coraz większe zastosowanie w codziennym życiu. Szybki rozwój techniki, miniaturyzacja oraz niższe koszty produkcji sprawiają, że coraz więcej urządzeń codziennego użytku wyposażonych jest w układy elektroniczne, które skutczenie zwiększają ich możliwości. 

Obserwując rynek rowerowy można zauważyć, iż coraz większy nacisk kładziony jest na rozwój oraz zastosowanie wszelkiego rodzaju podzespołów rowerowych, wykorzystujących układy elektroniczne. Doskonałym przykładem takiego urządzenia, a właściwie zespołu urządzeń stanowiących integralną całość produktu, są elektroniczne układy do zmiany przełożeń w rowerze. Ta grupa produktów rozwijana jest, przez znaczących producentów sprzętu rowerowego, w najszybszym tempie. Warto jednak zwrócić uwagę, że nie jest jedyna. W momencie realizacji projektu, producenci testują na przykład układy adaptacyjnego zawieszenia rowerowego.   

Pierwsze próby opracowania elektroniczncyh układów do zmiany przełożeń w rowerze miały miejsce w latach 90 ubiegłego wieku. Jednak ze względu na wygórowaną cenę, wyższą zawodność niż odpowiedniki mechaniczne oraz wysoką masę, która zwłaszcza w kolarstwie szosowym jest nie do zaakceptowania, nie odniosły komercyjnego sukcesu. Dopiero w roku 2009 japońska firma Shimano wprowadziła na rynek w pełni funkcjonalny układ DuraAce Di2( z ang. {\em Digital Integrated Intelligence})(\cite{Dil00}). Grupa potwierdziła swoją wysoką pozycję na rynku m.in. poprzez to, że rowery wyposażone w ten napęd wygrały już kilkukrotnie wielkie wyścigi kolarskie, np. TourDeFrance. W 2015 Shimano wprowadziło na rynek grupę XTR Di2. Jest to odpowiednik DuraAce Di2 do zastowań w kolarstwie górskim. Shimano potwiedziło tym samym swoją dominację na rynku. Największy konkurent, frima SRAM, wprowadziła do swojej oferty układ sterowany elektronicznie dopiero w roku 2016. Seria RED eTAP, oferowana przez SRAM, wyróżnia się kilkoma ciekawmymi rozwiązaniami. Jest to system w pełni bezprzewodowy, który do transmisji danych używa nielicencjonowanego pasma 2.4 GHz a dane szyfrowane są przy użyciu kluczy o długości 128 bitów. System w pełni bezprzewodowy wymusił zastosowanie rozproszonego systemu zasilania, na który składją się dwa akumulatory litowo-jonowe zasilające przerzutki oraz dwie baterie CR2032 zasilające klamkomanetki\cite{bikeWorld.pl}.

Ze względu na wiele zalet, elektroniczne układy zmiany przełożeń w rowerze zyskują coraz większe grono użytkowników, nie tylko tych w zawodowym peletonie czy zawodowych maratonach górskich. Przede wszystkim eliminują wady odpowiedników mechanicznych - nie są podatne na zużycie przewodów, dzięki czemu zachowują precyzję działania a czynności serwisowe sprowadzają się jedynie do ładowania akumulatorów. Umożliwiają zmianę przełożeń praktycznie bez żadnego wysiłku ze strony rowerzysty. Do tego zastosowanie przycisków w różnych miejscach na kierwonicy sprawia, że użytkownik nie musi zmieniać pozycji rąk aby zmienić przełożenie. W przypadku klasycznych klamkomanetek, montowanych w rowerach szosowych, takie rowzwiązanie nie jest możliwe. Jedyną wadą układów elektronicznych jest ich cena. W momencie opracowywania niniejszej pracy cena za kompletny układ napędowy z gupy Shimano DuraAce Di2 wynosiła około 1500\$

\section{Cel i zakres pracy}
\label{sec:Cel Pracy}
Celem niniejszej pracy jest wykonanie prototypu elektronicznego układu zmiany przełożeń w rowerze. Nawiązując do produktów oferowanych na rynku, autor zakłada, iż uda się wykonać system, który nie tylko będzie oferował ręczny dobór przełożeń, ale zostanie rozszerzony o możliwość automatycznej zmiany przełożeń wraz z możliwością profilowania charakterystyki pracy układu. Głównymi elementami mechanicznymi prototypu będą przerzutka tylna 8-rzędowa SRAM X-7, kaseta 8-rzędowa oraz blat przedni. Wózek przerzutki będzie pozycjonowany z wykorzystaniem serwomechanizmu. Układ sterowany będzie przy urzyciu mikrokontrolera. Do tego zostaną wykorzystane odpowiednie urządzenia pomiarowe, niezbędne do wykonania trybu automatycznego. Autor zdaje sobie sprawę, iż wykoannie prototypu, który pod względem mechanicznym może stanowić konkurencję dla rozwiązań oferowanych na rynku, wymagałoby niezwykle dużego nakładu pracy. Dlatego swoją uwagę skupił głównie na opracowaniu kompleksowego algorytmu sterjącego, który nie jest oferowany przez żadnego z producentów.

W kolejnym rozdziale pracy zaprezentowane zotały zagadnienia teoretyczne wykorzystane w trakcie budowy prototypu układu. Pokrótce scharakteryzowane zostały  mechaniczne układy napędowe wraz z układem przeniesienia napędu zamontowanym w rowerze. Opisana została również zasada działania serwomechanizmu i filtru dolnoprzepustowego. Następnie przedstawiono metody pomiarowe wielkości fizycznych, takich jak kadencja, prędkość roweru czy kąt nachylenia podłoża, po którym porusza się rower. Ostatnia z wielkości wyznaczana jest w oparciu o zastosowanie filtru komplementarnego. Zasada jego działania również znajduje się w tej części pracy.

W rozdziale trzecim znajduje się opis części wykorzystanych w ramach realizacji projektu. Są to zestaw uruchomieniowy z mikrokontrolerem Texas Instruments, przerzutka, czujniki pomiarowe oraz układ zasilania. Przedstawione zostały również narzędzia programistyczne wykorzystane przy projektowaniu sterownika układu. 

Nastepnie opisany został proces realizacji projektu, który można podzielić na dwa etapy - wykonanie części sprzętowej układu oraz zaprogramowanie kontrolera sterującego pozycją przerzutki. W opisie części sprzętowej można znaleźć informacje na temat sposobu montażu serwomechanizmu do przerzutki, zasady działania przerzutki oraz integracji elementów elektronicznych. W części dotyczącej oprogramowania kontrolera przedstawiona została struktura całego programu. Wszystkie tryby jazdy zostały szczegółowo opisane. W ostatniej części tego rozdziału zawarte zostały szczegóły związane z implementacją poszczególnych funkcjonalności.

Ostatni rozdział zawiera podsumowanie projektu wraz z wnioskami Autora. Nakreślone również zostały plany rozwoju projektu.